---
title: "Univariate analysis of categorical and numeric variables"
author: "Making Sense of Criminological Data (Week 2)"
subtitle: "Sam Langton, University of Manchester"
format: revealjs
editor_options: 
  chunk_output_type: console
execute:
  echo: false
---

```{r setup}
library(knitr)
library(dplyr)
library(readr)
library(tidyr)
```


## Plan for today

- What is univariate analysis?
- Types of variables: categorical & numeric
- Analysis
  - Frequencies and percentages (categorical)
  - Measures of central tendency (numeric)
- So what?

## Univariate analysis

<br>

::: columns
::: {.column width="50%"}
- Univariate = one variable
- Simple but common (and important)
- Typically **summarising** and **describing** 
:::

::: {.column width="50%"}

![](img/unicycle.gif)
:::
:::

## Categorical variables

::: columns
::: {.column width="50%"}
- Two or more categories, such as:
  - Nationality
  - Crime type
  - Education
- Nominal or ordinal

:::

::: {.column width="50%"}

![](img/categorical.png){width=70%}

:::
:::

## Analysis: frequencies 

```{r}
students_df <- data.frame(
  Student.ID  = c(12,6,34,2,41,15),
  Nationality = c("British","British","French",
                   "Dutch","French","British")
)
```

::: columns
::: {.column width="50%"}
```{r}
kable(students_df, align = "l", caption = "Raw data") 
```

:::

::: {.column width="50%"}
  
:::

:::

## Analysis: frequencies 

::: columns
::: {.column width="50%"}
```{r}
kable(students_df, align = "l", caption = "Raw data")
```
:::

::: {.column width="50%"}

<br>

```{r}
freq_df <- students_df %>% 
  group_by(Nationality) %>% 
  summarise(Count = n())

kable(freq_df, align = "l", caption = "Frequency table")
```

:::
:::

## Analysis: proportions

<br>

::: columns
::: {.column width="50%"}

```{r}
kable(freq_df, align = "l", caption = "Frequency table")
```

:::

::: {.column width="50%"}

:::
:::

## Analysis: proportions

<br>

::: columns
::: {.column width="50%"}

```{r}
kable(freq_df, align = "l", caption = "Frequency table")
```

:::

::: {.column width=50%}

```{r}
freq_df %>% 
  mutate(total = sum(Count),
         Percent = round(Count/total*100, 0)) %>% 
  select(-total, -Count) %>% 
  kable(align = "l", caption = "Proportion table")
```

:::

::: {.column width=50%}
  
:::

:::

## Frequency & proportions

<br>

```{r}
mersey <- read_csv("data/2025-07-merseyside-stop-and-search.csv")

syork <- read_csv("data/2025-07-south-yorkshire-stop-and-search.csv")

mersey_gen <- count(mersey, Gender, name = "Count") %>%
  drop_na()

syork_gen <- count(syork, Gender, name = "Count") %>% 
  drop_na() %>% 
  bind_rows(data.frame(
    Gender = "Other", Count = 0 # Making categories comparable.
  ))
```

Are there differences between police forces with regards to the gender of individuals subject to stop-and-search?

::: columns
::: {.column width=50%}
```{r}
kable(mersey_gen, caption = "Merseyside")
```
:::
::: {.column width=50%}
```{r}
kable(syork_gen, caption = "South Yorkshire") 
```
:::
:::

<br>

<center>

Data for July 2025. Source: https://data.police.uk/data/.

</center>

## Frequency & proportions

<br>

```{r}
mersey <- read_csv("data/2025-07-merseyside-stop-and-search.csv")

syork <- read_csv("data/2025-07-south-yorkshire-stop-and-search.csv")

mersey_gen <- count(mersey, Gender, name = "Count") %>%
  drop_na()

syork_gen <- count(syork, Gender, name = "Count") %>% 
  drop_na() %>% 
  bind_rows(data.frame(
    Gender = "Other", Count = 0 # Making categories comparable.
  ))
```

Are there differences between police forces with regards to the gender of individuals subject to stop-and-search?

::: columns
::: {.column width=50%}
```{r}
mersey_gen %>% 
  mutate(total = sum(Count),
         Percent = round(Count/total*100, 0)) %>% 
  select(-total, -Count) %>% 
  kable(caption = "Merseyside")
```
:::
::: {.column width=50%}
```{r}
syork_gen %>% 
  mutate(total = sum(Count),
         Percent = round(Count/total*100, 0)) %>% 
  select(-total, -Count) %>% 
  kable(caption = "South Yorkshire") 
```
:::
:::

<br>

<center>

Data for July 2025. Source: https://data.police.uk/data/.

</center>

## Frequency & proportions

<br>

What is the gender breakdown of individuals subject to stop-and-search **in Chorlton** between **1-7 September**?

<center>

::: columns
::: {.column width=50%}
| Gender | Percent |
| :----- | -----:  |
| Female | 100     |
| Male   | 0       |
| Other  | 0       |

: Proportion table

:::

::: {.column width=50%}

:::
:::

<br>

Data is fictitious! 
</center>

## Frequency & proportions

<br>

What is the gender breakdown of individuals subject to stop-and-search **in Chorlton** between **1-7 September**?

<center>

::: columns
::: {.column width=50%}
| Gender | Percent |
| :----- | -----:  |
| Female | 100     |
| Male   | 0       |
| Other  | 0       |

: Proportion table

:::

::: {.column width=50%}
| Gender | Count  |
| :----- | ------:|
| Female | 1      |
| Male   | 0      |
| Other  | 0      |

: Frequency table

:::
:::

<br>

Data is fictitious! 
</center>

## Numeric variables

## Analysis: central tendancy

## So what?


